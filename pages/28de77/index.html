<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3上手指南 | DK Rao&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.21b825ed.css" as="style"><link rel="preload" href="/assets/js/app.63f7405e.js" as="script"><link rel="preload" href="/assets/js/3.4c003ae3.js" as="script"><link rel="preload" href="/assets/js/2.1e9afdb9.js" as="script"><link rel="preload" href="/assets/js/57.2f34925d.js" as="script"><link rel="prefetch" href="/assets/js/1.dc850e31.js"><link rel="prefetch" href="/assets/js/10.5dbbc478.js"><link rel="prefetch" href="/assets/js/100.ff19186b.js"><link rel="prefetch" href="/assets/js/11.87e57194.js"><link rel="prefetch" href="/assets/js/12.4eece6bb.js"><link rel="prefetch" href="/assets/js/13.da88bff8.js"><link rel="prefetch" href="/assets/js/14.617fcb0e.js"><link rel="prefetch" href="/assets/js/15.e90ab816.js"><link rel="prefetch" href="/assets/js/16.217bdacc.js"><link rel="prefetch" href="/assets/js/17.2d36de58.js"><link rel="prefetch" href="/assets/js/18.09321884.js"><link rel="prefetch" href="/assets/js/19.b6545d31.js"><link rel="prefetch" href="/assets/js/20.3c7ccd65.js"><link rel="prefetch" href="/assets/js/21.9f3d9714.js"><link rel="prefetch" href="/assets/js/22.5bcf33e5.js"><link rel="prefetch" href="/assets/js/23.137a28d3.js"><link rel="prefetch" href="/assets/js/24.e9647410.js"><link rel="prefetch" href="/assets/js/25.e2f58923.js"><link rel="prefetch" href="/assets/js/26.dd88bede.js"><link rel="prefetch" href="/assets/js/27.3fa321d4.js"><link rel="prefetch" href="/assets/js/28.ef3548f7.js"><link rel="prefetch" href="/assets/js/29.9d932b65.js"><link rel="prefetch" href="/assets/js/30.3b1344cb.js"><link rel="prefetch" href="/assets/js/31.adb9ef94.js"><link rel="prefetch" href="/assets/js/32.ba3b310d.js"><link rel="prefetch" href="/assets/js/33.490aec31.js"><link rel="prefetch" href="/assets/js/34.3af32dbe.js"><link rel="prefetch" href="/assets/js/35.7ba2c423.js"><link rel="prefetch" href="/assets/js/36.45188d46.js"><link rel="prefetch" href="/assets/js/37.5aa1785c.js"><link rel="prefetch" href="/assets/js/38.2067f88b.js"><link rel="prefetch" href="/assets/js/39.f3777001.js"><link rel="prefetch" href="/assets/js/4.5cdec1e0.js"><link rel="prefetch" href="/assets/js/40.3e57f79d.js"><link rel="prefetch" href="/assets/js/41.6bab86e5.js"><link rel="prefetch" href="/assets/js/42.fc5c7ffb.js"><link rel="prefetch" href="/assets/js/43.882f3619.js"><link rel="prefetch" href="/assets/js/44.e0b4829e.js"><link rel="prefetch" href="/assets/js/45.9a8f29b4.js"><link rel="prefetch" href="/assets/js/46.e135ca80.js"><link rel="prefetch" href="/assets/js/47.a6036de5.js"><link rel="prefetch" href="/assets/js/48.d29a02a9.js"><link rel="prefetch" href="/assets/js/49.c7bc2bd4.js"><link rel="prefetch" href="/assets/js/5.250cdbf8.js"><link rel="prefetch" href="/assets/js/50.0b7f4d01.js"><link rel="prefetch" href="/assets/js/51.75cd77c1.js"><link rel="prefetch" href="/assets/js/52.9a8580a8.js"><link rel="prefetch" href="/assets/js/53.2c4a3f34.js"><link rel="prefetch" href="/assets/js/54.b5925329.js"><link rel="prefetch" href="/assets/js/55.9d030f6c.js"><link rel="prefetch" href="/assets/js/56.e9c1d955.js"><link rel="prefetch" href="/assets/js/58.a4eadcb3.js"><link rel="prefetch" href="/assets/js/59.25be9a24.js"><link rel="prefetch" href="/assets/js/6.d5177ab6.js"><link rel="prefetch" href="/assets/js/60.3494f023.js"><link rel="prefetch" href="/assets/js/61.57c595c0.js"><link rel="prefetch" href="/assets/js/62.f4e3be21.js"><link rel="prefetch" href="/assets/js/63.e40fa3d1.js"><link rel="prefetch" href="/assets/js/64.1464c9e9.js"><link rel="prefetch" href="/assets/js/65.ff5a9bdd.js"><link rel="prefetch" href="/assets/js/66.846ce21f.js"><link rel="prefetch" href="/assets/js/67.e2b7bec3.js"><link rel="prefetch" href="/assets/js/68.60d17170.js"><link rel="prefetch" href="/assets/js/69.34618919.js"><link rel="prefetch" href="/assets/js/70.fdb34293.js"><link rel="prefetch" href="/assets/js/71.d9d201ba.js"><link rel="prefetch" href="/assets/js/72.3a1c785d.js"><link rel="prefetch" href="/assets/js/73.f3d321c0.js"><link rel="prefetch" href="/assets/js/74.5f33d37c.js"><link rel="prefetch" href="/assets/js/75.281ea73f.js"><link rel="prefetch" href="/assets/js/76.465addf6.js"><link rel="prefetch" href="/assets/js/77.2564b7e8.js"><link rel="prefetch" href="/assets/js/78.a52c2e87.js"><link rel="prefetch" href="/assets/js/79.51c74067.js"><link rel="prefetch" href="/assets/js/80.dc3de84a.js"><link rel="prefetch" href="/assets/js/81.349bec82.js"><link rel="prefetch" href="/assets/js/82.fe3d6458.js"><link rel="prefetch" href="/assets/js/83.fececd3e.js"><link rel="prefetch" href="/assets/js/84.8abd5704.js"><link rel="prefetch" href="/assets/js/85.86950311.js"><link rel="prefetch" href="/assets/js/86.16cb092f.js"><link rel="prefetch" href="/assets/js/87.3e01636c.js"><link rel="prefetch" href="/assets/js/88.028ffdcf.js"><link rel="prefetch" href="/assets/js/89.0d2a51fb.js"><link rel="prefetch" href="/assets/js/9.23dd9dc1.js"><link rel="prefetch" href="/assets/js/90.8a58543f.js"><link rel="prefetch" href="/assets/js/91.eee5d437.js"><link rel="prefetch" href="/assets/js/92.458b922a.js"><link rel="prefetch" href="/assets/js/93.49ce0fe6.js"><link rel="prefetch" href="/assets/js/94.85821361.js"><link rel="prefetch" href="/assets/js/95.046b0fb4.js"><link rel="prefetch" href="/assets/js/96.b56d2320.js"><link rel="prefetch" href="/assets/js/97.7c1df4c9.js"><link rel="prefetch" href="/assets/js/98.7a0e133c.js"><link rel="prefetch" href="/assets/js/99.db916e56.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.db27a015.js">
    <link rel="stylesheet" href="/assets/css/0.styles.21b825ed.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/EB-logo.png" alt="DK Rao's Blog" class="logo"> <span class="site-name can-hide">DK Rao's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Jonathan-Rao/rdk-blog-dist" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://Jonathan-Rao.github.io/picx-images-hosting/20251017/f2097d47b248127e.mguj2u7f.jpg"> <div class="blogger-info"><h3>DK Rao</h3> <span>前端界的前行者</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Jonathan-Rao/rdk-blog-dist" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue3上手指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/28de77/#二、vue2-vs-vue3" class="sidebar-link">二、Vue2 vs Vue3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_2-1-简单点说" class="sidebar-link">2.1 简单点说</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_2-2-源码" class="sidebar-link">2.2 源码</a></li></ul></li><li><a href="/pages/28de77/#三、全新的api" class="sidebar-link">三、全新的API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_3-1-setup" class="sidebar-link">3.1 setup</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_3-2-ref" class="sidebar-link">3.2 ref</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_3-3-reactive" class="sidebar-link">3.3 reactive</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_3-4、生命周期" class="sidebar-link">3.4、生命周期</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_3-5-watch-watcheffect" class="sidebar-link">3.5 watch &amp; watchEffect</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_3-6-computed" class="sidebar-link">3.6 computed</a></li></ul></li><li><a href="/pages/28de77/#四、组件" class="sidebar-link">四、组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_4-1-异步组件" class="sidebar-link">4.1 异步组件</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_4-2-teleport传送组件" class="sidebar-link">4.2 Teleport传送组件</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_4-3-keep-alive缓存组件" class="sidebar-link">4.3 keep-alive缓存组件</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_4-4-组件通信" class="sidebar-link">4.4 组件通信</a></li></ul></li><li><a href="/pages/28de77/#五、ts支持" class="sidebar-link">五、TS支持</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/28de77/#六、插件" class="sidebar-link">六、插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_6-1-开源插件" class="sidebar-link">6.1 开源插件</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_6-2-vscode插件" class="sidebar-link">6.2 vscode插件</a></li></ul></li><li><a href="/pages/28de77/#七、指令" class="sidebar-link">七、指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_7-1-v-model" class="sidebar-link">7.1 v-model</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_7-2-自定义指令" class="sidebar-link">7.2 自定义指令</a></li></ul></li><li><a href="/pages/28de77/#八、hook" class="sidebar-link">八、Hook</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_8-1-自定义hook" class="sidebar-link">8.1 自定义Hook</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_8-2-hook库" class="sidebar-link">8.2 hook库</a></li><li class="sidebar-sub-header level3"><a href="/pages/28de77/#_8-3-react-vs-vue3" class="sidebar-link">8.3 react vs vue3</a></li></ul></li><li><a href="/pages/28de77/#九、结语" class="sidebar-link">九、结语</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><!----> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Jonathan-Rao" target="_blank" title="作者" class="beLink" data-v-06225672>DK Rao</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-08</a></div> <div title="分类" class="date iconfont icon-wenjian" data-v-06225672><a href="/categories/?category=%E5%89%8D%E7%AB%AF" data-v-06225672>前端 </a></div></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Vue3上手指南<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="二、vue2-vs-vue3"><a href="#二、vue2-vs-vue3" class="header-anchor">#</a> 二、Vue2 vs Vue3</h2> <h3 id="_2-1-简单点说"><a href="#_2-1-简单点说" class="header-anchor">#</a> 2.1 简单点说</h3> <ul><li>Vue2只支持<code>单节点</code>，Vue3 template支持<code>多节点</code>，类似react fragments</li> <li><code>变化</code>基本都在script中（Option api -&gt; Composition api）不会再看见满屏的this了！！！</li> <li>style支持<code>v-bind</code></li> <li>Proxy代替defineProperty
<ul><li>defineProperty无法实现对数组对象的深层监听，<code>Proxy</code>是浏览器最新api，功能更加强大。</li> <li>不再支持IE，Vue2想享受Vue3带来的部分更新，可考虑升级<code>Vue2.7</code>版本</li></ul></li> <li>TypeScript的支持
<ul><li>Vue2采用的是Facebook的<code>Flow</code>，没法完美支持<code>TypeScript</code>（所以项目初期技术选型很重要）</li> <li>Vue3 TypeScript<code>完全重写</code>，提供和React一样的TS支持</li></ul></li> <li>全新生态
<ul><li>基本还是vue周边伴随Vue3升级那一套，但是状态管理推荐，由原来的Vuex变为<code>Pina</code></li> <li>全新的<code>vite</code>支持，包括<code>vitest</code>等，官方提供周边工具更多了</li></ul></li> <li>其它优化
<ul><li><code>性能更好，体积更小</code>就不用说了</li> <li><code>事件监听缓存</code>，类似@click绑定的函数，无需多次创建，放在了cacheHandler缓存中</li> <li><code>SSR</code>：Vue 3.0 会将静态标签直接转化为文本，相比 React 先将 JSX 转化为虚拟 DOM，再将虚拟 DOM 转化为 HTML，这一点Vue3的速度要快很多</li> <li><code>Use Hooks</code> 放弃过去的mixins，使用Hooks解决过去mixins的一些缺点</li></ul></li></ul> <h3 id="_2-2-源码"><a href="#_2-2-源码" class="header-anchor">#</a> 2.2 源码</h3> <blockquote><p>了解的不多，后续再补充</p></blockquote> <h4 id="diff算法的优化"><a href="#diff算法的优化" class="header-anchor">#</a> diff算法的优化</h4> <ul><li>不再和vue2一样，完全对比两棵虚拟DOM树，Vue3采用<code>动静结合</code>的方法，优化diff性能</li> <li>通过编译阶段对静态模板进行分析，编译生成 Block tree。更新性能由 <code>模版整体大小相关</code> =》与<code>动态内容的数量相关</code>，这是一个非常大的性能突破。将代码提升到渲染函数之外，这样可以避免在每次渲染时重新创建这些对象，从而大大提高内存使用率并减少垃圾回收的频率。</li></ul> <h4 id="源码管理"><a href="#源码管理" class="header-anchor">#</a> 源码管理</h4> <ul><li>vue2 <code>poly-repo</code> <ul><li>vue2.x的源码托管在src目录中，然后依据功能拆分出了complier(模板编译的相关代码)，core(与平台无关的通用运行时代码)，platforms(平台专有代码)，server（服务端渲染的相关代码）、sfc（.vue 单文件解析相关代码）、shared（共享工具代码） 等目录</li></ul></li> <li>vue3 <code>mono-repo</code> <ul><li>package可以<code>独立于</code>vue.js去使用，这样例如用户想要使用vue3.0的响应式，可以<code>单独依赖reactive</code>，而不必依赖整个vue.js，减少引用包的体积，而vue2.x却做不到这一点。</li></ul></li> <li>源码结构对比 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc103a05a49a462ca125bf62ab95e0c8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?" alt="image.png"></li></ul> <h2 id="三、全新的api"><a href="#三、全新的api" class="header-anchor">#</a> 三、全新的API</h2> <p><a href="https://link.juejin.cn?target=https%3A%2F%2Fv3.cn.vuejs.org%2Fguide%2Fcomposition-api-introduction.html%23%25E4%25BB%2580%25E4%25B9%2588%25E6%2598%25AF%25E7%25BB%2584%25E5%2590%2588%25E5%25BC%258F-api" title="https://v3.cn.vuejs.org/guide/composition-api-introduction.html#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E5%90%88%E5%BC%8F-api" target="_blank" rel="noopener noreferrer">什么是组合式 API？- Vue官方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>解决了过去组件过长时，optionsApi带来的难以维护的问题</li> <li>逻辑可以整块复用</li> <li>所有API都是import引入的，对Tree- shaking很友好，没用到功能，打包的时候会被清理掉，减小包的大小</li></ul> <h3 id="_3-1-setup"><a href="#_3-1-setup" class="header-anchor">#</a> 3.1 setup</h3> <ul><li>新的 <code>setup</code> 选项在组件被创建<strong>之前</strong>执行，一旦 <code>props</code> 被解析完成，它就将被作为组合式 API 的入口。</li> <li>可以当做Vue2的beforeCreate和create生命周期用</li> <li>可直接写<code>await语法</code></li> <li>SFC单文件组件中直接使用<code>&lt;script lang=&quot;ts&quot; setup&gt;</code>即可，或者也可以结合<code>export default</code>使用</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span> setup<span class="token operator">&gt;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> Http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/getUserInfo'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">// or</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Attribute (非响应式对象，等同于 $attrs)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span>
    <span class="token comment">// 插槽 (非响应式对象，等同于 $slots)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>slots<span class="token punctuation">)</span>
    <span class="token comment">// 触发事件 (方法，等同于 $emit)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>emit<span class="token punctuation">)</span>
    <span class="token comment">// 暴露公共 property (函数)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>expose<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_3-2-ref"><a href="#_3-2-ref" class="header-anchor">#</a> 3.2 ref</h3> <ul><li>ref 用来创建<code>基础类型</code>的响应式数据</li> <li>template中默认调用value显示数据，script中需要使用<code>.value</code> 调用</li> <li>和react ref差不多，react是.current获取值，vue3是.value。</li> <li>Ref的本质是通过Reactive创建的，Ref(10)=&gt;Reactive({value:10})</li></ul> <blockquote><p>有一定的心智负担，尤大也明确说了不会支持script中直接访问。究其原因，还是基础类型无法拦截它的变化，当然也有大哥提出用new String('foo')类似的语法对基础类型进行包装。个人感觉直接拿已支持的reactive来搞也不错</p></blockquote> <h4 id="相关api"><a href="#相关api" class="header-anchor">#</a> 相关api</h4> <ul><li><code>Ref</code> ts定义 <code>import { type Ref } from 'vue';</code></li> <li><code>isRef</code> 判断是否为ref对象。一般是ref，toRef，toRefs创建的变量</li> <li><code>toRefs</code> 将<code>reactive对象</code>解构为单个响应式对象</li> <li><code>shallowRef</code> 创建一个跟踪自身 .value 变化的 ref，但不会使其值也变成响应式的，简单理解为创建一个和ref相同结构的非响应式变量</li> <li><code>triggerRef</code> 强制更新页面DOM。即使创建的ref没有变，想更新dom可以用</li> <li><code>customRef</code> 提供类似于computed的get和set，可自定义ref行为</li></ul> <h3 id="_3-3-reactive"><a href="#_3-3-reactive" class="header-anchor">#</a> 3.3 reactive</h3> <ul><li>reactive 用来创建<code>引用类型</code>的响应式数据</li> <li>reactive的本质是将每一层的数据都解析成<code>proxy对象</code></li> <li>reactive 的响应式默认都是<code>递归的</code>，改变某一层的值都会递归的调用一遍，重新渲染dom。</li> <li><code>直接解构</code>，响应性会丢失，需要用<code>toRefs</code>包裹。引用类型直接改变引用地址也会导致响应式丢失</li></ul> <h4 id="相关api-2"><a href="#相关api-2" class="header-anchor">#</a> 相关api</h4> <ul><li><code>readonly</code> 将reactive的值更改为只读</li> <li><code>shallowReactive</code> 只能对浅层的数据响应 如果是深层的数据只会改变值 不会改变视图</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">'Vue Team'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">year</span><span class="token operator">:</span> <span class="token string">'2020'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Vue 3 Guide'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'You are reading this book right now ;)'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token string">'free'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> author<span class="token punctuation">,</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>

title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'Vue 3 Detailed Guide'</span> <span class="token comment">// 我们需要使用 .value 作为标题，现在是 ref</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token comment">// 'Vue 3 Detailed Guide'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_3-4、生命周期"><a href="#_3-4、生命周期" class="header-anchor">#</a> 3.4、生命周期</h3> <p>区别不大，把setup当created用，其它就当改了个名</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getUserInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获取用户信息'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span>getUserInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bdd4d01ec6794684ae46bfbfa96820c3~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?" alt="image.png"></p> <h3 id="_3-5-watch-watcheffect"><a href="#_3-5-watch-watcheffect" class="header-anchor">#</a> 3.5 watch &amp; watchEffect</h3> <h4 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h4> <ul><li>功能和vue2一致</li> <li>watch(监听参数，变化回调，配置参数)</li> <li>注意监听对象的单个属性：<code>watch(() =&gt; articleInfo.author, (newVal) =&gt; {})</code>,第一个参数为箭头函数返回要监听的目标属性</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> counter1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> counter2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// 监听多个</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>counter1<span class="token punctuation">,</span> counter2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The new counter1 value is: '</span> <span class="token operator">+</span> counter1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The new counter2 value is: '</span> <span class="token operator">+</span> counter2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'JJ'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 深度监听对象</span>
<span class="token function">watch</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The new obj value is: '</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// watch监听单个属性</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The new obj value is: '</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="watcheffect"><a href="#watcheffect" class="header-anchor">#</a> watchEffect</h4> <ul><li>类似React useEffect，但是不需要写依赖项，只要我们回调中引用了 <code>响应式的属性</code></li> <li>和watch的区别：
<ul><li>同一个功能的两种不同形态，底层的实现是一样的</li> <li>watch 可以获取到新值与旧值（更新前的值），而 <code>watchEffect</code> 是拿不到的。</li> <li>watch - <code>显式</code>指定依赖源，watchEffect - <code>自动</code>收集依赖源</li> <li>watchEffect 在组件初始化的时候就会执行一次用以收集依赖，watch指定了依赖，所以不需要。</li> <li><code>可以理解为watchEffect 就是配置了{ immediate: true } 的watch</code></li></ul></li> <li>使用场景：<code>antfu小哥</code>：推荐在大部分时候用 watch 显式的指定依赖以避免不必要的重复触发，也避免在后续代码修改或重构时不小心引入新的依赖。watchEffect 适用于一些逻辑相对简单，依赖源和逻辑强相关的场景（或者懒惰的场景 ）。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> stopWatch <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>oninvalidate<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">oninvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;前置校验函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 引用了响应式的属性 count</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;watchEffect count变化&quot;</span><span class="token punctuation">,</span> count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 副作用刷新时机 flush 一般使用post</span>
    <span class="token comment">// 可选：pre(组件更新前执行)/sync(强制效果始终同步触发)/post(组件更新后执行)</span>
    <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 开发调试</span>
    <span class="token function">onTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;开发调试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_3-6-computed"><a href="#_3-6-computed" class="header-anchor">#</a> 3.6 computed</h3> <ul><li>更加灵活，可以在定义响应式变量时声明</li> <li>作用和vue2无差异</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> twiceTheCounter <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counter<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// get set写法</span>
<span class="token keyword">const</span> plusOne <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counter<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    counter<span class="token punctuation">.</span>value <span class="token operator">=</span> val <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

plusOne<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 0</span>

counter<span class="token punctuation">.</span>value<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>twiceTheCounter<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 2</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="四、组件"><a href="#四、组件" class="header-anchor">#</a> 四、组件</h2> <h3 id="_4-1-异步组件"><a href="#_4-1-异步组件" class="header-anchor">#</a> 4.1 异步组件</h3> <ul><li>通过进行引入defineAsyncComponent</li> <li>可配合Suspense 进行更多操作，可用于loading和骨架屏相关，和react Suspense基本一致。不过react Suspense基本一致这个属性都不太好用，vue的不清楚实际场景咋样</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// template</span>
<span class="token operator">&lt;</span>Suspense<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>template #<span class="token keyword">default</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>AsyncComponent<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>AsyncComponent<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>template #fallback<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>

<span class="token comment">// script</span>
<span class="token keyword">const</span> AsyncComponent <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./asyncComponent.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-2-teleport传送组件"><a href="#_4-2-teleport传送组件" class="header-anchor">#</a> 4.2 Teleport传送组件</h3> <p>Teleport 是一种能够将我们的模板渲染至指定DOM节点，不受父级style、v-show等属性影响，但data、prop数据依旧能够共用的技术；类似于 <code>React 的 Portal</code>。之前写react是不怎么用这个属性，vue3这个估计也没多大用。</p> <p>主要解决的问题 因为Teleport节点挂载在其他指定的DOM节点下，完全不受父级style样式影响</p> <p>to 属性 插入指定元素位置，body，html，自定义className等等</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Teleport to<span class="token operator">=</span><span class="token string">&quot;body&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Loading<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Loading<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Teleport<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-3-keep-alive缓存组件"><a href="#_4-3-keep-alive缓存组件" class="header-anchor">#</a> 4.3 keep-alive缓存组件</h3> <ul><li>作用和vue2还是一样的，生命周期名称变了</li> <li>初次进入时：onMounted&gt; onActivated</li> <li>退出后触发 deactivated</li> <li>再次进入：只会触发 onActivated</li></ul> <h3 id="_4-4-组件通信"><a href="#_4-4-组件通信" class="header-anchor">#</a> 4.4 组件通信</h3> <h4 id="definexxxx"><a href="#definexxxx" class="header-anchor">#</a> defineXxxx</h4> <blockquote><p>defineXxxx 无需import即可直接使用</p></blockquote> <ul><li>defineProps 代替过去的props</li> <li>defineEmits 代替过去的$emit</li> <li>defineOptions 自定义一些组件属性，比如组件名称（需要插件支持）</li> <li>defineComponent 用于render函数、TSX、IDE提醒等</li> <li>defineExpose 子组件声明的数据，暴露给父组件直接用</li></ul> <h4 id="provide-inject"><a href="#provide-inject" class="header-anchor">#</a> provide/inject</h4> <p>和vue2一致</p> <h4 id="vuex-pina"><a href="#vuex-pina" class="header-anchor">#</a> vuex &amp; pina</h4> <blockquote><p>两者用法，除了pina没有Mutations，差别不大。但是官方推荐的东西，自然有它的各种优点</p></blockquote> <ul><li>Vuex： State、Gettes、Mutations(同步)、Actions(异步)</li> <li>Pinia： State、Gettes、Actions(同步异步都支持)</li> <li>Vuex4 用于 Vue3 ，Vuex3 用于 Vue2</li> <li>Pinia2.x 即支持 Vue2 也支持 Vue3</li></ul> <h2 id="五、ts支持"><a href="#五、ts支持" class="header-anchor">#</a> 五、TS支持</h2> <ul><li>可以让写react的兄弟，快速上手写vue3</li> <li>react中 {{}} =&gt; {}</li> <li>兼容的指令：v-model，v-if，v-show</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">let</span> v <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">renderDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token punctuation">{</span>v<span class="token punctuation">.</span>value<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
               <span class="token punctuation">{</span>v<span class="token punctuation">.</span>value<span class="token punctuation">}</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> renderDom

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="六、插件"><a href="#六、插件" class="header-anchor">#</a> 六、插件</h2> <h3 id="_6-1-开源插件"><a href="#_6-1-开源插件" class="header-anchor">#</a> 6.1 开源插件</h3> <h4 id="unplugin-auto-import-vite"><a href="#unplugin-auto-import-vite" class="header-anchor">#</a> unplugin-auto-import/vite</h4> <p>无需导入xxx，<code>import { reactive,ref } from &quot;vue&quot;;</code>，只需要用即可</p> <h4 id="unplugin-vue-define-options"><a href="#unplugin-vue-define-options" class="header-anchor">#</a> unplugin-vue-define-options</h4> <p>自定义组件名称，需要引入插件<code>unplugin-vue-define-options</code>,并在vite中配置</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> DefineOptions <span class="token keyword">from</span> <span class="token string">'unplugin-vue-define-options/vite'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DefineOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>不使用插件，也可以通过多写一个script标签来单独写options</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;TButton&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span> setup<span class="token operator">&gt;</span>
  <span class="token function">defineOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'TButton'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_6-2-vscode插件"><a href="#_6-2-vscode插件" class="header-anchor">#</a> 6.2 vscode插件</h3> <h4 id="volar-vscode"><a href="#volar-vscode" class="header-anchor">#</a> volar vscode</h4> <ul><li>vetur只支持vue2，volar只支持vue3，两者冲突。</li> <li>建议禁用vetur，格式化代码使用prettier，本地使用volar做代码高亮。</li> <li>或者通过项目配置，指定相关插件配置 <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb86434ae5e1431faeb4b392e2f81359~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?" alt="image.png"></li></ul> <h2 id="七、指令"><a href="#七、指令" class="header-anchor">#</a> 七、指令</h2> <h3 id="_7-1-v-model"><a href="#_7-1-v-model" class="header-anchor">#</a> 7.1 v-model</h3> <ul><li>底层语法糖时间改变，之前vue2是update:input，vue3 是update:modelValue</li> <li>支持多个v-model</li> <li>支持自定义修饰符</li> <li>弃用.sync等</li></ul> <h3 id="_7-2-自定义指令"><a href="#_7-2-自定义指令" class="header-anchor">#</a> 7.2 自定义指令</h3> <h4 id="生命周期-和vue3一致"><a href="#生命周期-和vue3一致" class="header-anchor">#</a> 生命周期（和vue3一致）</h4> <ul><li>created 元素初始化的时候</li> <li>beforeMount 指令绑定到元素后调用 只调用一次</li> <li>mounted 元素插入父级dom调用</li> <li>beforeUpdate 元素被更新之前调用</li> <li>update 这个周期方法被移除 改用updated</li> <li>beforeUnmount 在元素被移除前调用</li> <li>unmounted 指令被移除后调用 只调用一次</li></ul> <h4 id="自定义拖拽指令v-move"><a href="#自定义拖拽指令v-move" class="header-anchor">#</a> 自定义拖拽指令v-move</h4> <ul><li>比如这个v-move 封装自定义拖拽指令</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Directive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token literal-property property">vMove</span><span class="token operator">:</span> Directive <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> moveEl <span class="token operator">=</span> el<span class="token punctuation">.</span>firstElementChild <span class="token keyword">as</span> HTMLElement<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">mouseDown</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> MouseEvent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//鼠标点击物体那一刻相对于物体左侧边框的距离=点击时的位置相对于浏览器最左边的距离-物体左边框相对于浏览器最左边的距离</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span> <span class="token string">&quot;-----起始&quot;</span><span class="token punctuation">,</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> <span class="token constant">X</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
      <span class="token keyword">let</span> <span class="token constant">Y</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> el<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token function-variable function">move</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> MouseEvent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> <span class="token constant">X</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token constant">Y</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span> <span class="token string">&quot;---改变&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mouseup&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    moveEl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousedown&quot;</span><span class="token punctuation">,</span> mouseDown<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="八、hook"><a href="#八、hook" class="header-anchor">#</a> 八、Hook</h2> <p>用了react hook的人都知道很香，vue3支持这个相当不错，能解决很多业务场景的封装</p> <h3 id="_8-1-自定义hook"><a href="#_8-1-自定义hook" class="header-anchor">#</a> 8.1 自定义Hook</h3> <p>可以当做mixins写</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// useWindowResize</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> onUnmounted<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">useWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> height <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">onResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">.</span>value <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>
    height<span class="token punctuation">.</span>value <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> onResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">onResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> onResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">,</span>
    height
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useWindowResize<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_8-2-hook库"><a href="#_8-2-hook库" class="header-anchor">#</a> 8.2 hook库</h3> <ul><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvueuse%2Fvueuse" title="https://github.com/vueuse/vueuse" target="_blank" rel="noopener noreferrer">vueuse<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 官方，感谢评论区<a href="https://juejin.cn/user/3438928104002856" title="https://juejin.cn/user/3438928104002856" target="_blank" rel="noopener noreferrer">@rogepi<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 小哥的提醒</li> <li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdewfall123.github.io%2Fahooks-vue%2F" title="https://dewfall123.github.io/ahooks-vue/" target="_blank" rel="noopener noreferrer">ahooks-vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyanzhandong%2Fv3hooks" title="https://github.com/yanzhandong/v3hooks" target="_blank" rel="noopener noreferrer">v3hooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="_8-3-react-vs-vue3"><a href="#_8-3-react-vs-vue3" class="header-anchor">#</a> 8.3 react vs vue3</h3> <ul><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F133819602" title="https://zhuanlan.zhihu.com/p/133819602" target="_blank" rel="noopener noreferrer">Vue3 究竟好在哪里？（和 React Hook 的详细对比）ssh-晨曦时梦见兮<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1edbef1b8c740af9d6655035157ec42~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?" alt="image.png"></li></ul> <h2 id="九、结语"><a href="#九、结语" class="header-anchor">#</a> 九、结语</h2> <ul><li>Vue3 的依赖追踪是全自动的，不需要担心传了错误的依赖数组给 useEffect/useMemo/useCallback 从而导致回调中- 使用了过期的值</li> <li>Vue3 Hook也没React Hook那么多限制，后续用用看怎么样</li> <li>个人比较喜欢SFC语法，html、js、css分离开\</li></ul></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Jonathan-Rao/rdk-blog-dist/edit/master/docs/_posts/前端/Vue3上手指南.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=vue" title="标签">#vue</a><a href="/tags/?tag=vue3" title="标签">#vue3</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/04/13, 9:04:00</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/eabcb8/"><div>
            前端工程师生产环境 debugger 技巧
            <!----></div></a> <span class="date">10-17</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/2dd8e1/"><div>
            独立开发者资源
            <!----></div></a> <span class="date">09-05</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1bf551/"><div>
            Vis-Network中文API文档
            <!----></div></a> <span class="date">09-29</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:515977826@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Jonathan-Rao" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2025
    <span>DK Rao | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.63f7405e.js" defer></script><script src="/assets/js/3.4c003ae3.js" defer></script><script src="/assets/js/2.1e9afdb9.js" defer></script><script src="/assets/js/57.2f34925d.js" defer></script>
  </body>
</html>
