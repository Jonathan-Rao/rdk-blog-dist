(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{440:function(s,n,a){"use strict";a.r(n);var e=a(8),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/14/168e9f9bf002a3f7~tplv-t2oaga2asx-zoom-crop-mark:1304:1304:1304:734.awebp",alt:"使用verdaccio搭建npm私有仓库"}})]),s._v(" "),n("p",[s._v("原文链接： "),n("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Fliaolongdong.com%2F2019%2F01%2F24%2Fbuild-private-package.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("liaolongdong.com"),n("OutboundLink")],1)]),s._v(" "),n("h1",{attrs:{id:"使用verdaccio搭建npm私有仓库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用verdaccio搭建npm私有仓库"}},[s._v("#")]),s._v(" 使用verdaccio搭建npm私有仓库")]),s._v(" "),n("p",[s._v("需求背景：平时在项目工作中可能会用到很多通用性的代码，比如，框架类、工具类以及公用的业务逻辑代码等等，通过打包发布到npm中央仓库或者私有仓库，来进行维护和托管代码，方便公用代码的使用，如果涉及到不方便公开的代码组件可以发布到私有仓库。")]),s._v(" "),n("p",[s._v("私有npm组件库的优势：")]),s._v(" "),n("ul",[n("li",[s._v("私有npm包只对公司内部局域网开放")]),s._v(" "),n("li",[s._v("速度比直接在npm下载包更快，也比使用淘宝镜像快，毕竟是在公司内部局域网")]),s._v(" "),n("li",[s._v("对于发布和下载npm包可以配置权限管理")])]),s._v(" "),n("p",[s._v("在研究搭建npm私有组件仓库时，查阅了很多相关方面的资料，有使用maven包管理的私服工具nexus搭建私有仓库的，也有使用阿里的cnpm搭建私有仓库的，还有使用sinopia和verdaccio搭建私有仓库的，下面介绍一下它们的主要区别：")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fchaos_hf%2Farticle%2Fdetails%2F78668539",title:"https://blog.csdn.net/chaos_hf/article/details/78668539",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用maven包管理的私服工具nexus搭建私有仓库"),n("OutboundLink")],1),s._v("，这种方式功能强大，但更偏向后台使用，服务端的同学应该比较熟悉")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F80b88104ec1f",title:"https://www.jianshu.com/p/80b88104ec1f",target:"_blank",rel:"noopener noreferrer"}},[s._v("阿里的cnpm搭建npm私有仓库"),n("OutboundLink")],1),s._v("，这个是阿里自己内部也在使用的，应该也挺好用，不过需要安装MySQL数据库，而且配置比较麻烦")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2Fe4db4a0af96a",title:"https://www.jianshu.com/p/e4db4a0af96a",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用sinopia搭建npm私有仓库"),n("OutboundLink")],1),s._v("，这个使用比较简单，而且不用配置数据库，但是这个github项目好像三四年都没有人维护了")])]),s._v(" "),n("p",[s._v("经过查阅相关资料后对比，最后选择使用verdaccio来搭建npm私有仓库，这个github项目貌似是sinopia的分支，用法和sinopia差不多。")]),s._v(" "),n("h2",{attrs:{id:"服务器搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务器搭建"}},[s._v("#")]),s._v(" 服务器搭建")]),s._v(" "),n("p",[s._v("1、安装node")]),s._v(" "),n("blockquote",[n("p",[s._v("Verdaccio is a lightweight private npm proxy registry built in Node.js")])]),s._v(" "),n("p",[s._v("verdaccio是基于node.js的，所以在我们的服务器上需要安装node，如何在阿里云服务器安装node，详见我之前写的博客"),n("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Fliaolongdong.com%2F2018%2F11%2F01%2Falicloud-node-mongodb.html",title:"http://liaolongdong.com/2018/11/01/alicloud-node-mongodb.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("阿里云服务器上部署node+mongodb"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("2、安装verdaccio")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm install -g verdaccio --unsafe-perm\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("加上"),n("code",[s._v("--unsafe-perm")]),s._v("选项是为了防止"),n("code",[s._v("gyp ERR! permission denied")]),s._v("权限问题报错，如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('gyp ERR! configure error\ngyp ERR! stack Error: EACCES: permission denied, mkdir \'/usr/local/lib/node_modules/verdaccio/node_modules/dtrace-provider/build\'\ngyp ERR! System Linux 3.10.0-862.14.4.el7.x86_64\ngyp ERR! command "/usr/local/bin/node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"\ngyp ERR! cwd /usr/local/lib/node_modules/verdaccio/node_modules/dtrace-provider\ngyp ERR! node -v v8.12.0\ngyp ERR! node-gyp -v v3.8.0\ngyp ERR! not ok\n复制代码\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("如果出现需要更新npm，则执行"),n("code",[s._v("npm install -g npm")]),s._v("操作")]),s._v(" "),n("p",[s._v("执行结果：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/usr/local/bin/verdaccio\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("3、启动verdaccio")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("verdaccio\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("执行结果如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Verdaccio doesn't need superuser privileges. Don't run it under root.\n warn --- config file  - /root/.config/verdaccio/config.yaml\n warn --- Plugin successfully loaded: htpasswd\n warn --- Plugin successfully loaded: audit\n warn --- http address - http://localhost:4873/ - verdaccio/3.10.2\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("从控制台的输出，我们可以看到，verdaccio的配置文件路径在"),n("code",[s._v("/root/.config/verdaccio/config.yaml")]),s._v("和默认访问地址"),n("code",[s._v("http://localhost:4873/")]),s._v("，在配置文件末尾增加"),n("code",[s._v("listen: 0.0.0.0:4873")]),s._v("保存")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 进入verdaccio目录\ncd /root/.config/verdaccio/\n\n// 查看该目录下的文件，该目录下默认有两个文件：config.yaml和storage，添加用户之后会自动创建htpasswd\nls\n> config.yaml  storage\n\n// 查看配置文件\nvim config.yaml\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("如果需要外网访问，需要在配置文件config.yaml末尾加入代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# you can specify listen address (or simply a port)\nlisten: 0.0.0.0:4873\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如果是二级域名，需要配置前缀：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("url_prefix: /sub_directory/\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fdocs%2Fen%2Fconfiguration",title:"https://verdaccio.org/docs/en/configuration",target:"_blank",rel:"noopener noreferrer"}},[s._v("verdaccio默认配置"),n("OutboundLink")],1),s._v("，如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("storage: ./storage\nauth:\n  htpasswd:\n    file: ./htpasswd\nuplinks:\n  npmjs:\n    url: https://registry.npmjs.org/\npackages:\n  '@*/*':\n    access: $all\n    publish: $authenticated\n    proxy: npmjs\n  '**':\n    proxy: npmjs\nlogs:\n  - {type: stdout, format: pretty, level: http}\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("其中"),n("code",[s._v("url")]),s._v("可以配置成淘宝镜像地址：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("url: https://registry.npm.taobao.org/  //默认为npm的官网仓库地址，由于国情，修改 url 让verdaccio使用 淘宝的npm镜像地址，这样下载速度更快\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fdocs%2Fen%2Fconfiguration",title:"https://verdaccio.org/docs/en/configuration",target:"_blank",rel:"noopener noreferrer"}},[s._v("查看详细的verdaccio配置文件文档"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("4、使用pm2启动verdaccio，保证该进程一直处于打开状态")]),s._v(" "),n("p",[s._v("安装pm2")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm install -g pm2 --unsafe-perm\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("使用pm2启动verdaccio，以保证进程一直处于打开状态")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pm2 start verdaccio\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("执行命令以后结果如图所示：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/14/168e9f9e39eab3cd~tplv-t2oaga2asx-watermark.awebp",alt:"使用pm2启动verdaccio"}})]),s._v(" "),n("p",[s._v("5、访问搭建好的私有仓库")]),s._v(" "),n("p",[s._v("在浏览器中打开"),n("code",[s._v("http://47.107.60.51:4873")]),s._v("，如果能正常访问则说明搭建成功了。如图：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/14/168e9f9e3ad1f006~tplv-t2oaga2asx-watermark.awebp",alt:"浏览器打开私有仓库页面"}})]),s._v(" "),n("blockquote",[n("p",[s._v("注意：在阿里云服务器添加安全组，开放 "),n("code",[s._v("4873")]),s._v(" 端口号，如果没有添加该端口安全组则不能在浏览器正常访问"),n("code",[s._v("http://47.107.60.51:4873")])])]),s._v(" "),n("h2",{attrs:{id:"客户端-本地-发布npm到私有仓库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#客户端-本地-发布npm到私有仓库"}},[s._v("#")]),s._v(" 客户端（本地）发布npm到私有仓库")]),s._v(" "),n("p",[s._v("使用verdaccio在服务器搭建好私有仓库以后，接下来就是如何在本地上传npm包到私有仓库服务器了")]),s._v(" "),n("p",[s._v("发布npm包之前必须先注册账号，具体可参考博客"),n("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Fliaolongdong.com%2F2019%2F01%2F24%2Fpublish-public-npm.html",title:"http://liaolongdong.com/2019/01/24/publish-public-npm.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何开发一个npm包并发布到npm中央仓库"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"_1、登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、登录"}},[s._v("#")]),s._v(" 1、登录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm adduser --registry  http://47.107.60.51:4873\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("输入npm账号用户名、密码和邮箱，如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Username: better1025\nPassword:\nEmail: (this IS public) 924902324@qq.com\nLogged in as better1025 on http://47.107.60.51:4873/.\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("输出"),n("code",[s._v("Logged in as better1025 on http://47.107.60.51:4873/.")]),s._v("，表示npm账号"),n("code",[s._v("better1025")]),s._v("成功登录到"),n("code",[s._v("http://47.107.60.51:4873/")]),s._v("私有仓库了。")]),s._v(" "),n("h3",{attrs:{id:"_2、发布npm包到私有仓库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、发布npm包到私有仓库"}},[s._v("#")]),s._v(" 2、发布npm包到私有仓库")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm publish --registry http://47.107.60.51:4873\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("发布成功以后如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm notice\nnpm notice 📦  lld-npm-demo@1.0.2\nnpm notice === Tarball Contents ===\nnpm notice 230B package.json\nnpm notice 101B helloworld.js\nnpm notice 115B index.js\nnpm notice === Tarball Details ===\nnpm notice name:          lld-npm-demo\nnpm notice version:       1.0.2\nnpm notice package size:  412 B\nnpm notice unpacked size: 446 B\nnpm notice shasum:        990fac51aaa0cac64f25da052306112b588ce792\nnpm notice integrity:     sha512-Bl9FtXdg819Ds[...]jkTmzfbKjA9og==\nnpm notice total files:   3\nnpm notice\n+ lld-npm-demo@1.0.2\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("如何发布npm包以及遇到错误，参考博客"),n("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Fliaolongdong.com%2F2019%2F01%2F24%2Fpublish-public-npm.html",title:"http://liaolongdong.com/2019/01/24/publish-public-npm.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何开发一个npm包并发布到npm中央仓库"),n("OutboundLink")],1),s._v("就行，这里就不再累述了。")]),s._v(" "),n("h3",{attrs:{id:"_3、npm成功发布到私有仓库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、npm成功发布到私有仓库"}},[s._v("#")]),s._v(" 3、npm成功发布到私有仓库")]),s._v(" "),n("p",[s._v("在浏览器中刷新"),n("code",[s._v("http://47.107.60.51:4873")]),s._v("页面，如图：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/2/14/168e9f9e3a0c947c~tplv-t2oaga2asx-watermark.awebp",alt:"发布npm包到私有仓库成功"}})]),s._v(" "),n("h3",{attrs:{id:"_4、如何使用私有仓库npm包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、如何使用私有仓库npm包"}},[s._v("#")]),s._v(" 4、如何使用私有仓库npm包")]),s._v(" "),n("p",[s._v("由于国内访问国外网限制，为了提升我们下载npm包的速度，我们在平时项目开发中一般都会设置"),n("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Fnpm.taobao.org%2F",title:"http://npm.taobao.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("淘宝镜像"),n("OutboundLink")],1),s._v("。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 设置淘宝镜像\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("查看npm配置信息")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config ls\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("下载我们发布到私有仓库的npm包时，需要修改仓库地址，具体操作如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm set registry http://47.107.60.51:4873\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("在执行这条命令以后，再使用"),n("code",[s._v("npm install lld-npm-demo")]),s._v("命令就会优先去我们自己的私有仓库下载npm包，如何没有找到，则会从npm中央仓库下载")]),s._v(" "),n("p",[s._v("执行命令和结果，如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Betters-iMac:privateRegistry better$ npm set registry http://47.107.60.51:4873\nBetters-iMac:privateRegistry better$ npm install lld-npm-demo\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN privateregistry@1.0.0 No description\nnpm WARN privateregistry@1.0.0 No repository field.\n\n+ lld-npm-demo@1.0.2\nadded 1 package from 1 contributor and audited 1 package in 3.083s\nfound 0 vulnerabilities\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("最后推荐一个npm仓库切换工具：切换npm仓库地址，推荐使用nrm")]),s._v(" "),n("blockquote",[n("p",[s._v("nrm是 npm registry 管理工具, 能够查看和切换当前使用的registry。不安装也可以，安装会更高效。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm install -g nrm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);